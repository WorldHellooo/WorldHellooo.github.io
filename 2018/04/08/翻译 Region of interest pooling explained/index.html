<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>翻译 Region of interest pooling explained | WorldHellooo's Blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">翻译 Region of interest pooling explained</h1><a id="logo" href="/.">WorldHellooo's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">翻译 Region of interest pooling explained</h1><div class="post-meta">Apr 8, 2018<span> | </span><span class="category"><a href="/categories/Computer-Vision/">Computer Vision</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>原文链接：<br><a href="https://deepsense.io/region-of-interest-pooling-explained/" target="_blank" rel="external">https://deepsense.io/region-of-interest-pooling-explained/</a></p>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>感兴趣区域池化（也称作RoI pooling）是一个广泛应用在目标检测任务的卷积神经网络中的操作。它的目的是对不规范的输入进行max pooling，以获得固定尺寸的feature maps（例如7×7）。</p>
<p>我们开源了TensorFlow下的RoI Pooling实现。（<a href="https://github.com/deepsense-io/roi-pooling）。在本文中，我们将要简单介绍这个有趣的神经网络层。在这之前，我们先从背景开始。" target="_blank" rel="external">https://github.com/deepsense-io/roi-pooling）。在本文中，我们将要简单介绍这个有趣的神经网络层。在这之前，我们先从背景开始。</a></p>
<p>计算机视觉的两个主要任务是目标分类和目标检测（追踪表示不开心￣へ￣）。前者系统需要对一幅图像中的显著物体进行分类标记。后者则需要在一幅图像中，对于所有的物体给出正确的标记和位置信息。当然还有一些其他有趣的计算机视觉领域，如图像分割，但今天我们只关心检测。在这个任务中，我们通常应该在所有目标旁画上bounding box，依据之前指定的类别集合，给他们分配一个类别。例如，假设我们正在开发自动驾驶的算法，我们就需要相机检测其他的汽车、行人、骑车的人等等。</p>
<p>在这种情况下，我们必须需在每个重要的目标周围画一个box，分配一个类别给它。这个任务比在MNIST或CIFAR上的分类任务要更有挑战性。视频的每一帧中，可能有多个目标，一些发生重叠，一些难以看清，一些则被遮挡。另外，对于这样一个算法，performance是一个关键的问题。尤其对于自动驾驶，我们必须每秒处理数十帧图像。</p>
<p>所以，我们该如何解决这个问题呢？</p>
<h3 id="Typical-architecture"><a href="#Typical-architecture" class="headerlink" title="Typical architecture"></a>Typical architecture</h3><p>我们今天将要讨论的目标检测架构主要分为两个步骤：</p>
<p>1、 Region Proposal： 给定一个输入图像，找出所有目标可能存在的位置。这个阶段的输出应该是一个bounding box的列表，列出所有可能存在目标的位置。这些通常被叫做region proposal或regions of interest。针对这个任务有一些方法，本文中不再讨论。</p>
<p>2、 Final classification： 对于来自前一阶段的每一个region proposal， 判断其属于目标类别中的某一类或是属于背景。这里我们可能会使用一个深度卷积网络。</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/diagram_ROI-1024x576.png" alt="img"></p>
<p>通常在proposal环节，我们必须要产生大量的region of interest。为什么呢？如果一个目标在第一个阶段没有被检测出来，那么就不可能在第二个环节把它正确的分类。这就是为什么region proposals必须要有很高的查全率（recall）。这通常通过产生非常大量的proposals来实现（例如，每帧几千个）。他们中的大多数会在检测算法的第二个环节被分类为背景。</p>
<p>这种结构的一些问题有：</p>
<ul>
<li>产生大量的regions of interest可能会导致性能问题。这将使得实时的目标检测难以实现。</li>
<li>这是处理速度方面的次优选择。后面会详细讲。</li>
<li>不能实现端到端训练。也就是说，你不能在一次运行中训练系统所有的部分（这样能够产生更好的结果）。</li>
</ul>
<p>这就是RoI Pooling为什么被提出了。</p>
<h3 id="Region-of-interest-pooling-description"><a href="#Region-of-interest-pooling-description" class="headerlink" title="Region of interest pooling - description"></a>Region of interest pooling - description</h3><p>Region of interest pooling是一个用于目标检测任务的神经网络层。它由Ross Girshick在2015年四月首次提出，在训练和测试中都显著的提升了速度。它还维持了检测的高精度。这个层有两个输入：</p>
<ul>
<li>从具有多个卷积和最大池化层的深度卷积网络中获得的固定大小的feature map。</li>
<li>一个N×5的矩阵，表示感兴趣区域的列表，这里N是RoIs的数量。第一列表示图像下标，剩下的四个是左上和右下教的坐标。</li>
</ul>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/region_proposal_cat.png" alt="img2"></p>
<p>RoI Pooling实际上做了什么？对于输入列表中的每个感兴趣区域，它从输入feature map中截取对应的部分，并把它缩放到某个预训练的大小（比如7×7）。缩放通过如下完成：</p>
<ul>
<li>1、把region proposal划分成等大小的部分（其数目等同于输出的维度）。</li>
<li>2、找出每个部分的最大值。</li>
<li>3、把这些最大值复制到输出缓存中。</li>
</ul>
<p>结果就是，从一列的不同大小的矩形，我们可以快速的得到对应的固定大小的feature maps。注意RoI Pooling的输出维度实际上并不依赖于输入feature map的大小，也不依赖于region proposal的大小。它仅仅决定于我们把proposal划分成几个部分。</p>
<p>RoI pooling的好处是什么？其中一个就是处理速度。如果一帧中有多个目标的proposals，我们依然可以对它们用同样的输入feature map。由于前期阶段的卷积操作计算量非常大，这种方法能够节省我们大量时间。</p>
<h3 id="Region-of-interest-pooling-example"><a href="#Region-of-interest-pooling-example" class="headerlink" title="Region of interest pooling - example"></a>Region of interest pooling - example</h3><p>让我们来看看一个小例子如何工作。我们将在一个8×8的feature map上进行RoI pooling的操作，只有一个感兴趣区域，输出大小为2×2。输入特征图长这样：</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/1.jpg" alt="img3"></p>
<p>假设我们有个region proposal：(0,3) (7,8)在图中看起来是这样：</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/2.jpg" alt="img4"></p>
<p>通常，会有多个feature maps和多个proposal。但这里我们想让例子简单一些。</p>
<p>通过把它划分成(2×2)的部分，我们得到：</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/3.jpg" alt="img5"></p>
<p>注意感兴趣区域的大小并不需要能被划分数目整除。</p>
<p>每个部分的最大值如下：</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/output.jpg" alt="img6"></p>
<p>如下为RoI Pooling层的输出。</p>
<p><img src="https://deepsense.io/wp-content/uploads/2017/02/roi_pooling-1.gif" alt="img7"></p>
<p>关于RoI pooling需要记住的最重要的是什么？</p>
<ul>
<li>它用在目标检测任务中</li>
<li>它允许我们在卷积网络中复用feature map</li>
<li>它能够明显加速训练和测试</li>
<li>它允许以一种端到端的方式训练目标检测系统</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://worldhellooo.github.io/2018/04/08/翻译 Region of interest pooling explained/" data-id="cjplak4o0000t9wse2j1efywt" class="article-share-link">分享到</a><div class="tags"><a href="/tags/RoIPooling-翻译/">RoIPooling 翻译</a></div><div class="post-nav"><a href="/2018/04/12/基于PyQt的多源图像文字描述生成软件界面/" class="pre">基于PyQt的多源图像文字描述生成软件界面</a><a href="/2018/04/08/深度网络训练中的一些参数/" class="next">深度网络训练中的一些技巧</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://worldhellooo.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Vision/">Computer Vision</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Deep-Learning/">Deep Learning</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GUI/">GUI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reinforcement-Learing/">Reinforcement Learing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Visual-Tracking/">Visual Tracking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/competition/">competition</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/增强学习-目标追踪/" style="font-size: 15px;">增强学习 目标追踪</a> <a href="/tags/目标追踪/" style="font-size: 15px;">目标追踪</a> <a href="/tags/实例搜索-孪生结果-目标追踪/" style="font-size: 15px;">实例搜索 孪生结果 目标追踪</a> <a href="/tags/增强学习/" style="font-size: 15px;">增强学习</a> <a href="/tags/目标追踪-研究背景-主流思路/" style="font-size: 15px;">目标追踪 研究背景 主流思路</a> <a href="/tags/RoIPooling-翻译/" style="font-size: 15px;">RoIPooling 翻译</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/12/关于概率和熵的一些概念/">关于概率和熵的一些概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/18/deepmind论文解读/">DeepMind论文：连接多巴胺与元强化学习的新方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/26/pytorch doc阅读笔记/">pytorch doc阅读笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/18/大数据竞赛经验谈/">大数据竞赛经验谈</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/12/基于PyQt的多源图像文字描述生成软件界面/">基于PyQt的多源图像文字描述生成软件界面</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/翻译 Region of interest pooling explained/">翻译 Region of interest pooling explained</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/深度网络训练中的一些参数/">深度网络训练中的一些技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/目标追踪经典算法系列/">目标追踪算法之研究背景</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/SINT/">Introduction of Siamese Instance Search for Tracking</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/08/SiamFC改进思路/">SiamFC算法改进思路</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.jcix.top" title="Zhangjc's blog" target="_blank">Zhangjc's blog</a><ul></ul><a href="http://chaway.github.io" title="Chaway's blog" target="_blank">Chaway's blog</a><ul></ul><a href="http://www.votchallenge.net" title="VOT Challenge" target="_blank">VOT Challenge</a><ul></ul><a href="http://www.visual-tracking.net" title="OTB Benchmark" target="_blank">OTB Benchmark</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">WorldHellooo's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>